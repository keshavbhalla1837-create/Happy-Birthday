<!DOCTYPE html>
});
const nextStep = document.getElementById(`step${stepNumber}`);
if (nextStep) {
nextStep.classList.add('active');


/* ✅ Ensure new step starts at top when shown */
nextStep.scrollTop = 0;


gsap.fromTo(nextStep.querySelectorAll('.anim-child'),
{ opacity: 0, y: 30 },
{ opacity: 1, y: 0, duration: 0.7, ease: 'power2.out', stagger: 0.15, delay: 0.4 }
);
}
updateProgressBar();
}
function createNavListener(buttonId, action) {
const el = document.getElementById(buttonId);
if (el) el.addEventListener('click', action, { passive: true });
}
createNavListener('start-btn', () => { currentStep++; showStep(currentStep); });
createNavListener('next-btn-2', () => { currentStep++; showStep(currentStep); });
createNavListener('next-btn-3', () => { currentStep++; showStep(currentStep); });
createNavListener('next-btn-4', () => { currentStep++; showStep(currentStep); });
if (confettiBtn) {
confettiBtn.addEventListener('click', () => {
confettiBtn.style.pointerEvents = 'none';
gsap.to(confettiBtn, { opacity: 0, duration: 0.5 });
gsap.to('#final-wish', { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out', delay: 0.3 });


const duration = 5 * 1000;
const animationEnd = Date.now() + duration;
const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 100 };
const colors = ['#ec4899', '#f9a8d4', '#f43f5e', '#ffffff', '#e879f9'];


function randomInRange(min, max) { return Math.random() * (max - min) + min; }


const interval = setInterval(() => {
const timeLeft = animationEnd - Date.now();
if (timeLeft <= 0) return clearInterval(interval);


const particleCount = 50 * (timeLeft / duration);
confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }, colors }));
confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }, colors }));
}, 250);


setTimeout(() => {
confetti({
particleCount: 20,
origin: { y: 0.7 },
emojis: ['❤️', '💖', '✨'],
scalar: 3
});
}, 500);


hearts.forEach(heart => {
gsap.to(heart.position, {
x: (Math.random() - 0.5) * 80,
y: heart.position.y + 70 + Math.random() * 20,
z: (Math.random() - 0.5) * 40,
duration: 4,
ease: 'power3.out'
});
gsap.to(heart.rotation, { x: Math.random() * Math.PI * 4, y: Math.random() * Math.PI * 4, duration: 5, ease: 'power3.out' });
gsap.to(heart.material, { opacity: 0, duration: 4, delay: 0.5, ease: 'power2.in' });
});
}, { passive: true });
}


initThreeJS();
updateProgressBar();
showStep(1);
});
</script>
</body>
</html>
